!function(t,n,i,e,a){t(document).ready((function(){u.init()}));var u={init:function(){this.filter_search(),this.onEvent(),this.count(),this.initRouting()},initRouting:function(){var n=window.location.hash,i=t('.filter-links a[href="'+n+'"]');i&&i.click()},count:function(){var n=t(".list-plugins .plugin-card").length,i=t(".list-plugins .plugin-card.required").length,e=t(".list-plugins .plugin-card.recommended").length,a=t(".list-plugins .plugin-card.can-update").length;function u(n,i){var e=t(".filter-links ."+n+" a");e&&e.find("span").text(i)}u("all",n),u("required",i),u("recommended",e),u("updates",a);var s=t(".thim-core-count-notification");s.each((function(t,n){n.className=n.className.replace(/count-\d+/,"count-"+a)})),a>0?s.find(".plugin-count").text(a):s.remove(),a?t(".filter-links .updates").addClass("active"):t(".filter-links .updates").removeClass("active")},filter_search:function(){var n,i,e=t(".thim-wrapper .plugin-tab"),a=e.find(".filter-links"),u=e.find("#plugin-filter").find(".list-plugins").isotope({filter:function(){var e=t(this),a=!n||e.find(".name").text().match(n),u=!i||e.is(i);return a&&u}});a.on("click","li",(function(){a.find("li a").removeClass("current"),t(this).find("a").addClass("current"),i=t(this).data("filter"),u.isotope()}));var s=t(".wp-filter-search").keyup(this.debounce((function(){n=new RegExp(s.val(),"gi"),u.isotope()})))},debounce:function(t,n){var i;return function(){i&&clearTimeout(i),i=setTimeout((function(){t(),i=null}),n||100)}},onEvent:function(){var n=this;i.success((function(i,a){if(i.success){var u=i.data,s=u.action,o=u.slug,r=u.status,c=t(document).find(".plugin-card.plugin-card-"+o),l=c.find(".plugin-action-buttons .button");l.text(u.text),l.attr("data-action",s),c.removeClass("can-update"),c.attr("data-status",r);var d=u.info;c.find(".data_Version").text(d.Version),n.count(),"update"===a.action&&e.updates.decrementCount("plugin")}else{for(var p=i.data.messages,f="",g=0;g<p.length;g++)f+=(m=p[g],t("<textarea></textarea>").html(m).text()+"\n");alert(f),-1!==f.indexOf("Site code is not exist")&&(window.location.href="admin.php?page=thim-license")}var m})),i.error((function(n,i){var e=n.slug;t(document).find(".plugin-card.plugin-card-"+e).find(".plugin-action-buttons .button").text("Failed")})),i.complete((function(n){var i=n.slug,e=t(document).find(".plugin-card.plugin-card-"+i).find(".plugin-action-buttons .button");e.attr("disabled",!1),e.removeClass("updating-message")})),t(document).on("click",".plugin-action-buttons button:not(.updating-message)",(function(n){n.preventDefault();var e=t(this),u=e.attr("data-action"),s=0;if(void 0!==e.attr("data-premium")&&(s=e.attr("data-premium")),"update"!==u&&"install"!==u||"1"!==s||a.check_active()){e.addClass("updating-message"),e.attr("disabled",!0);var o=e.parents(".plugin-action-buttons").data("slug");i.push({action:u,slug:o})}}))}}}(jQuery,Thim_Plugins,Thim_Plugins_Queue,window.wp,window.Thim_Core);
