(()=>{"use strict";const e={};"undefined"!=typeof lpDataAdmin&&(e.admin={apiAdminNotice:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpDataAdmin.lp_rest_url+"lp/v1/orders/statistic",apiAddons:lpDataAdmin.lp_rest_url+"lp/v1/addon/all",apiAddonAction:lpDataAdmin.lp_rest_url+"lp/v1/addon/action-n",apiAddonsPurchase:lpDataAdmin.lp_rest_url+"lp/v1/addon/info-addons-purchase",apiSearchCourses:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-course",apiSearchUsers:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-user",apiAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/assign-user-course",apiUnAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/unassign-user-course",apiAJAX:lpDataAdmin.lp_rest_url+"lp/v1/load_content_via_ajax/"}),"undefined"!=typeof lpData&&(e.frontend={apiWidgets:lpData.lp_rest_url+"lp/v1/widgets/api",apiCourses:lpData.lp_rest_url+"lp/v1/courses/archive-course",apiAJAX:lpData.lp_rest_url+"lp/v1/load_content_via_ajax/",apiProfileCoverImage:lpData.lp_rest_url+"lp/v1/profile/cover-image"});const t=()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e},s=(e,t)=>{const s=new URL(e);return Object.keys(t).forEach((e=>{s.searchParams.set(e,t[e])})),s},a=(e,t)=>{new IntersectionObserver((function(e){for(const s of e)s.isIntersecting&&t(s)})).observe(e)};let r;"undefined"==typeof lpData&&console.log("lpData is undefined"),document.addEventListener("change",(function(e){const t=e.target;window.lpCoursesList.onChangeSortBy(e,t),window.lpCoursesList.onChangeTypeLayout(e,t)})),document.addEventListener("click",(function(e){const t=e.target;window.lpCoursesList.clickNumberPage(e,t),window.lpCoursesList.LoadMore(e,t)})),document.addEventListener("keyup",(function(e){const t=e.target;window.lpCoursesList.searchCourse(e,t)})),document.addEventListener("submit",(function(e){e.target})),((e,t)=>{const s=document.querySelector(e);if(s)return void t(s);const a=new MutationObserver(((s,a)=>{const r=document.querySelector(e);r&&(a.disconnect(),t(r))}));a.observe(document.documentElement,{childList:!0,subtree:!0})})(".course-filter-btn-mobile",(function(e){document.querySelector(".widget_course_filter")||e.remove()})),window.lpCoursesList=(()=>{const e=".lp-list-courses-no-css",n=".lp-target",o=".courses-page-result",l=".lp-loading-no-css",i=t();return{clickNumberPage:(e,t)=>{const a=t.closest(".page-numbers:not(.disabled)");if(!a)return;const r=a.closest(`${n}`);if(!r)return;const o={...JSON.parse(r.dataset.send)};if(o.args.hasOwnProperty("paged")||(o.args.paged=1),0===o.args.courses_load_ajax)return;e.preventDefault(),a.classList.contains("prev")?o.args.paged--:a.classList.contains("next")?o.args.paged++:o.args.paged=a.textContent,r.dataset.send=JSON.stringify(o),lpData.urlParams.paged=o.args.paged,window.history.pushState({},"",s(i,lpData.urlParams));const l=r.closest("div:not(.lp-target)").querySelector(".lp-loading-change");l&&(l.style.display="block");const c=r.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c});const d={success:e=>{const{status:t,message:s,data:a}=e;r.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{l&&(l.style.display="none")}};window.lpAJAXG.fetchAJAX(o,d)},LoadMore:(t,s)=>{const a=s.closest(".courses-btn-load-more-no-css:not(.disabled)");if(!a)return;const r=a.closest(`${n}`);if(!r)return;t.preventDefault(),a.classList.add("disabled");const i=a.querySelector(l),c={...JSON.parse(r.dataset.send)};c.args.hasOwnProperty("paged")||(c.args.paged=1),c.args.paged++,r.dataset.send=JSON.stringify(c),i&&i.classList.remove("hide");const d={success:t=>{const{status:s,message:n,data:l}=t,i=parseInt(l.paged),c=parseInt(l.total_pages),d=document.createElement("div");d.innerHTML=l.content||"";const u=r.querySelector(e),p=r.querySelector(o),g=d.querySelector(o);u.insertAdjacentHTML("beforeend",d.querySelector(e).innerHTML),p&&g&&(p.innerHTML=g.innerHTML),i>=c&&a.remove()},error:e=>{console.log(e)},completed:()=>{i&&i.classList.add("hide"),a.classList.remove("disabled")}};window.lpAJAXG.fetchAJAX(c,d)},LoadInfinite:()=>{const t=t=>{const s=t.target,a=s.querySelector(`${l}:not(.disabled)`);if(!a)return;a.classList.remove("hide"),a.classList.add("disabled");const r=s.closest(n);if(!r)return;const i={...JSON.parse(r.dataset.send)};i.args.hasOwnProperty("paged")||(i.args.paged=1),i.args.paged++,r.dataset.send=JSON.stringify(i);const c={success:t=>{const{status:a,message:n,data:l}=t,i=document.createElement("div");i.innerHTML=l.content||"";const c=r.querySelector(e),d=r.querySelector(o),u=i.querySelector(o);c.insertAdjacentHTML("beforeend",i.querySelector(e).innerHTML),d&&u&&(d.innerHTML=u.innerHTML),l.total_pages===l.paged&&s.remove()},error:e=>{console.log(e)},completed:()=>{a.classList.add("hide"),a.classList.remove("disabled")}};window.lpAJAXG.fetchAJAX(i,c)};var s;s=e=>{e.classList.contains("courses-load-infinite-no-css")&&a(e,t)},new MutationObserver((function(e){e.forEach((function(e){e.addedNodes&&e.addedNodes.forEach((function(e){1===e.nodeType&&s(e)}))}))})).observe(document,{childList:!0,subtree:!0});const r=document.querySelector(".courses-load-infinite-no-css");r&&a(r,t)},onChangeSortBy:(e,t)=>{if(!t.classList.contains("courses-order-by"))return;const a=t.closest(n);if(!a)return lpData.urlParams.paged=1,lpData.urlParams.order_by=t.value||"",void(window.location.href=s(i,lpData.urlParams));e.preventDefault();const r={...JSON.parse(a.dataset.send)};r.args.paged=1,r.args.order_by=t.value||"",a.dataset.send=JSON.stringify(r),lpData.urlParams.paged=r.args.paged,lpData.urlParams.order_by=r.args.order_by,window.history.pushState({},"",s(i,lpData.urlParams));const o=a.closest("div:not(.lp-target)").querySelector(".lp-loading-change");o&&(o.style.display="block");const l={success:e=>{const{status:t,message:s,data:r}=e;a.innerHTML=r.content||""},error:e=>{console.log(e)},completed:()=>{o&&(o.style.display="none")}};window.lpAJAXG.fetchAJAX(r,l)},onChangeTypeLayout:(t,s)=>{if("lp-switch-layout-btn"!==s.getAttribute("name"))return;const a=document.querySelector(e);if(!a)return;t.preventDefault();const r=s.value;r&&(a.dataset.layout=r,window.wpCookies.set("courses-layout",r,86400,"/"))},searchCourse:(e,a)=>{if("c_search"!==a.name)return;const o=a.closest(n);if(!o)return;e.preventDefault();const l={...JSON.parse(o.dataset.send)},i=a.value;l.args.c_search=i||"",l.args.paged=1,o.dataset.send=JSON.stringify(l),lpData.urlParams.paged=l.args.paged,lpData.urlParams.c_search=l.args.c_search,window.history.pushState({},"",s(t(),lpData.urlParams)),(!i||i&&i.length>2)&&(void 0!==r&&clearTimeout(r),r=setTimeout((function(){const e={success:e=>{const{status:t,message:s,data:a}=e;o.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{}};window.lpAJAXG.fetchAJAX(l,e)}),800))}}})(),window.lpCoursesList.LoadInfinite()})();